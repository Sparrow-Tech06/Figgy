<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Sprint Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.4/howler.min.js"></script>
</head>
<body>

<h3 id="timer"></h3>
<h2 id="q"></h2>

<button onclick="answer(true)">Correct</button>
<button onclick="answer(false)">Wrong</button>

<button id="endBtn" style="display:none" onclick="showResult()">End</button>

<script>
/* ---------- SETTINGS ---------- */
const timerOn = localStorage.getItem("timerOn") === "true";
const soundOn = localStorage.getItem("soundOn") === "true";

/* ---------- SOUNDS (FIXED PATH) ---------- */
const sounds = {
  click: new Howl({ src:["../assets/sound/click.mp3"] }),
  correct: new Howl({ src:["../assets/sound/correct.mp3"] }),
  wrong: new Howl({ src:["../assets/sound/wrong.mp3"] }),
  bg: new Howl({ src:["../assets/sound/bg.mp3"], loop:true, volume:0.4 })
};

if(soundOn) sounds.bg.play();

/* ---------- GAME DATA ---------- */
let total = 10;
let index = 0;
let score = 0;
let time = 30;
let timerInterval;

/* ---------- TIMER ---------- */
if(timerOn){
  document.getElementById("timer").innerText = time;
  timerInterval = setInterval(()=>{
    time--;
    document.getElementById("timer").innerText = time;
    if(time <= 0) showResult();
  },1000);
}else{
  document.getElementById("endBtn").style.display = "block";
}

/* ---------- QUESTION ---------- */
function loadQ(){
  if(index >= total){
    showResult();
    return;
  }
  document.getElementById("q").innerText =
    `Question ${index+1} / ${total}`;
}
loadQ();

/* ---------- ANSWER ---------- */
function answer(isCorrect){
  if(soundOn) sounds.click.play();

  if(isCorrect){
    score++;
    if(soundOn) sounds.correct.play();
  }else{
    if(soundOn) sounds.wrong.play();
  }

  index++;
  loadQ();
}

/* ---------- RESULT ---------- */
function showResult(){
  clearInterval(timerInterval);
  if(soundOn) sounds.bg.stop();

  document.body.innerHTML = `
    <h1>Result</h1>
    <h2>${score} / ${total}</h2>
    <button onclick="location.href='../index.html'">Home</button>
  `;
}
</script>

</body>
</html>

