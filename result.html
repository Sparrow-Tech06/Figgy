<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Game Result</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/howler@2.2.4/dist/howler.min.js"></script>

<style>
:root{
  --bg:#ffffff;
  --card: none ;
  --text:#1e1f24;
  --muted:#6c757d;
  --border:#e6e8ef;
  --primary:#4f46e5;
  --radius:18px;
}
@media (prefers-color-scheme: dark){
  :root{
    --bg:#0f1115;
    --card:#1d2129;
    --text:#e5e7eb;
    --muted:#9ca3af;
    --border:#2f3750;
  }
}

body{
  margin:0;
  min-height:100vh;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
}

/* ===== FULL VIEWPORT ===== */
.result-wrapper{
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:20px;
  position:relative;
}

/* ===== RESULT CARD ===== */
.result-card{
  width:100%;
  max-width:420px;
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:28px;
  text-align:center;
  z-index:2;
  animation:fade .35s ease;
}

@keyframes fade{
  from{opacity:0;transform:translateY(14px)}
  to{opacity:1}
}

.game-name{
  font-size:14px;
  color:var(--muted);
}
.score{
  font-size:48px;
  font-weight:800;
  margin:14px 0 6px;
}
.percent{
  color:var(--muted);
  margin-bottom:26px;
}

/* BUTTON */
.btn-outline{
  border:1px solid var(--border);
  padding:14px;
  border-radius:14px;
  font-weight:600;
  background:transparent;
  margin-top: 30px ;
}

/* ===== PREMIUM CONFETTI ===== */
#confetti{
  position:fixed;
  inset:0;
  z-index:9999;
  pointer-events:none;
  overflow:hidden;
}

.confetti{
  position:absolute;
  top:-12px;
  opacity:.9;
  animation-name:confetti-fall;
  animation-timing-function:cubic-bezier(.23,.61,.35,1);
  animation-fill-mode:forwards;
}

@keyframes confetti-fall{
  0%{
    transform:translate3d(0,0,0) rotate(0deg);
    opacity:1;
  }
  100%{
    transform:
      translate3d(var(--drift),110vh,0)
      rotate(var(--rotate));
    opacity:0;
  }
}
</style>
</head>

<body>

<!-- ðŸŽ‰ CONFETTI LAYER -->
<div id="confetti"></div>

<div class="result-wrapper">
  <div class="result-card">
    <div class="game-name" id="gameName">Game</div>
    <div class="score" id="score">0 / 0</div>
    <div class="percent" id="percent">0%</div>

    <button class="btn btn-outline w-100" onclick="goBack()">
      Back to Menu
    </button>
  </div>
</div>

<script>
/* ===== DATA ===== */
const score = Number(localStorage.getItem('lastScore') || 0);
const total = Number(localStorage.getItem('lastTotal') || 0);
const gameName = localStorage.getItem('lastGame') || 'Game';

/* ===== UI ===== */
document.getElementById('gameName').innerText = gameName;
document.getElementById('score').innerText = `${score} / ${total}`;
const percent = total ? Math.round((score/total)*100) : 0;
document.getElementById('percent').innerText = `${percent}% Accuracy`;

/* ===== SOUND ===== */
if(localStorage.getItem('soundOn') === '1'){
  new Howl({
    src:['assets/sound/correct.mp3'],
    volume:.6
  }).play();
}

/* ===== PREMIUM CONFETTI ===== */
(function premiumConfetti(){
  const wrap = document.getElementById('confetti');
  const colors = ['#4f46e5','#22c55e','#f59e0b','#ef4444','#06b6d4'];
  const pieces = 150;

  for(let i=0;i<pieces;i++){
    const el = document.createElement('div');
    el.className = 'confetti';

    const size = Math.random()*6 + 6; // 6â€“12px
    const circle = Math.random() > 0.7;

    el.style.width = size+'px';
    el.style.height = circle ? size+'px' : size*1.4+'px';
    el.style.borderRadius = circle ? '50%' : '3px';
    el.style.background =
      colors[Math.floor(Math.random()*colors.length)];

    el.style.left = Math.random()*100+'vw';

    /* â±ï¸ INCREASED TIME */
    const duration = 4000 + Math.random()*2000;  // 4-6 sec
    const delay = Math.random()*400;

    el.style.animationDuration = duration+'ms';
    el.style.animationDelay = delay+'ms';

    el.style.setProperty('--drift',
      (Math.random()*220 - 110)+'px'
    );
    el.style.setProperty('--rotate',
      (Math.random()*900 - 450)+'deg'
    );

    wrap.appendChild(el);
  }

  setTimeout(()=>wrap.remove(), 6500);
})();

/* ===== BACK NAVIGATION ===== */
function goBack(){
  window.history.back();
}

/* ðŸ”’ RESULT PAGE SHOULD NOT TRAP USER */
history.pushState(null,'',location.href);
window.onpopstate = () => window.history.back();
</script>

</body>
</html>

