<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Game Result</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/howler@2.2.4/dist/howler.min.js"></script>

<style>
:root{
  --bg:#ffffff;
  --card:#f7f8fa;
  --text:#1e1f24;
  --muted:#6c757d;
  --border:#e6e8ef;
  --primary:#4f46e5;
  --radius:16px;
}
@media (prefers-color-scheme: dark){
  :root{
    --bg:#0f1115;
    --card:#1d2129;
    --text:#e5e7eb;
    --muted:#9ca3af;
    --border:#2f3750;
  }
}
body{
  margin:0;
  min-height:100vh;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* CARD */
.result-card{
  width:100%;
  max-width:420px;
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:24px;
  text-align:center;
  animation:fade .35s ease;
}
@keyframes fade{
  from{opacity:0;transform:translateY(12px)}
  to{opacity:1}
}

.game-name{
  font-size:14px;
  color:var(--muted);
}
.score{
  font-size:48px;
  font-weight:800;
  margin:12px 0 4px;
}
.percent{
  color:var(--muted);
  margin-bottom:20px;
}

/* BUTTONS */
.btn-primary{
  background:var(--primary);
  border:none;
  padding:14px;
  border-radius:14px;
  font-weight:600;
}
.btn-outline{
  border:1px solid var(--border);
  padding:14px;
  border-radius:14px;
  font-weight:600;
  background:transparent;
}
</style>
</head>

<body>

<div class="result-card">

  <div class="game-name" id="gameName">Game</div>
  <div class="score" id="score">0 / 0</div>
  <div class="percent" id="percent">0%</div>

  <button class="btn btn-primary w-100 mb-3" onclick="replayGame()">
    Play Again
  </button>

  <button class="btn btn-outline w-100" onclick="goMenu()">
    Back to Menu
  </button>

</div>

<script>
/* ===== DATA ===== */
const score = Number(localStorage.getItem('lastScore') || 0);
const total = Number(localStorage.getItem('lastTotal') || 0);
const gameName = localStorage.getItem('lastGame') || 'Game';
const gameKey  = localStorage.getItem('currentGame');

/* ===== UI ===== */
document.getElementById('gameName').innerText = gameName;
document.getElementById('score').innerText = `${score} / ${total}`;

const percent = total ? Math.round((score/total)*100) : 0;
document.getElementById('percent').innerText = `${percent}% Accuracy`;

/* ===== SOUND (optional) ===== */
const soundOn = localStorage.getItem('soundOn') === '1';
if(soundOn){
  new Howl({
    src:['assets/sound/correct.mp3'],
    volume:.6
  }).play();
}

/* ===== ACTIONS ===== */
function replayGame(){
  if(!gameKey){
    location.href='index.html';
    return;
  }
  location.href = `games/${gameKey}.html`;
}

function goMenu(){
  if(!gameKey){
    location.href='index.html';
    return;
  }
  location.href = `menu.html?game=${gameKey}`;
}

// ðŸ”’ RESULT PAGE SHOULD NEVER GO BACK
history.pushState(null, '', location.href);

window.onpopstate = function () {
  const gameKey = localStorage.getItem('currentGame');
  location.replace(`menu.html?game=${gameKey}`);
};
  
</script>

</body>
</html>
